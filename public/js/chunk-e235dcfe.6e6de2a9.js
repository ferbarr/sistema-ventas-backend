(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e235dcfe"],{"039a":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-flex justify-center mt-2"},[n("v-snackbar",{attrs:{top:"",color:e.snack.color,timeout:e.snack.time},model:{value:e.snack.active,callback:function(t){e.$set(e.snack,"active",t)},expression:"snack.active"}},[e._v(e._s(e.snack.msj))]),n("v-card",{staticClass:"col-11"},[n("v-card-title",[n("v-btn",{attrs:{fab:"",small:"",color:"primary"},on:{click:function(t){e.dialog=!0,e.btn.agregar=!0}}},[n("v-icon",[e._v("mdi-plus")])],1),n("v-spacer"),n("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),n("v-data-table",{attrs:{locale:"es-MX",headers:e.encabezado,items:e.clientes,search:e.search},scopedSlots:e._u([{key:"item.accion",fn:function(t){var a=t.item;return[n("v-btn",{staticClass:"mr-2",attrs:{fab:"",text:"",small:"",color:"green"},on:{click:function(t){return e.datosEdit(a)}}},[n("v-icon",{attrs:{dark:""}},[e._v("mdi-pencil")])],1)]}},{key:"item.estado",fn:function(t){var a=t.item;return[1===a.estado?n("div",[n("v-btn",{staticClass:"green",attrs:{small:""},on:{click:function(t){return e.editEstado(a)}}},[e._v("Activo")])],1):e._e(),0===a.estado?n("div",[n("v-btn",{staticClass:"red",attrs:{small:""},on:{click:function(t){return e.editEstado(a)}}},[e._v("Inactivo")])],1):e._e()]}}],null,!0)})],1),n("v-dialog",{attrs:{persistent:"","max-width":"700px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"red lighten-2"},[e._v("Cliente "),n("v-spacer"),n("v-btn",{attrs:{text:"",fab:"",color:"black"},on:{click:function(t){return e.clear()}}},[n("v-icon",[e._v("mdi-close")])],1)],1),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{staticClass:"col-12 col-sm-6 col-md-4"},[n("v-text-field",{attrs:{label:"Nombre"},model:{value:e.inputs.nombre,callback:function(t){e.$set(e.inputs,"nombre",t)},expression:"inputs.nombre"}})],1),n("v-col",{staticClass:"col-12 col-sm-6 col-md-4"},[n("v-select",{attrs:{items:e.documentos,label:"Tipo documento"},model:{value:e.inputs.tipo_documento,callback:function(t){e.$set(e.inputs,"tipo_documento",t)},expression:"inputs.tipo_documento"}})],1),n("v-col",{staticClass:"col-12 col-sm-6 col-md-4"},[n("v-text-field",{attrs:{label:"Número de documento"},model:{value:e.inputs.num_documento,callback:function(t){e.$set(e.inputs,"num_documento",t)},expression:"inputs.num_documento"}})],1),n("v-col",{staticClass:"col-12 col-sm-6 col-md-4"},[n("v-text-field",{attrs:{label:"Dirección"},model:{value:e.inputs.direccion,callback:function(t){e.$set(e.inputs,"direccion",t)},expression:"inputs.direccion"}})],1),n("v-col",{staticClass:"col-12 col-sm-6 col-md-4"},[n("v-text-field",{attrs:{label:"Teléfono",type:"number",step:"any"},model:{value:e.inputs.telefono,callback:function(t){e.$set(e.inputs,"telefono",t)},expression:"inputs.telefono"}})],1),n("v-col",{staticClass:"col-12 col-sm-6 col-md-4"},[n("v-text-field",{attrs:{label:"Email"},model:{value:e.inputs.email,callback:function(t){e.$set(e.inputs,"email",t)},expression:"inputs.email"}})],1)],1)],1)],1),n("v-card-actions",[n("v-btn",{on:{click:function(t){return e.clear()}}},[e._v("cancelar")]),n("v-spacer"),this.btn.agregar?n("v-btn",{on:{click:function(t){return e.guardarCliente()}}},[e._v("Guardar")]):e._e(),this.btn.editar?n("v-btn",{on:{click:function(t){return e.editarCliente()}}},[e._v("Editar")]):e._e()],1)],1)],1),n("v-dialog",{attrs:{persistent:"","max-width":"400px"},model:{value:e.estado.active,callback:function(t){e.$set(e.estado,"active",t)},expression:"estado.active"}},[n("v-card",[n("v-card-title",{staticClass:"red lighten-2"},[e._v("Cliente "),n("v-spacer"),n("v-btn",{attrs:{text:"",fab:"",color:"black"},on:{click:function(t){return e.clearEstado()}}},[n("v-icon",[e._v("mdi-close")])],1)],1),n("v-card-text",[n("v-container",[1===this.estado.estado?n("span",{staticClass:"black--text"},[e._v("¿Deseas desactivar el cliente "+e._s(this.estado.nombre)+"?")]):e._e(),0===this.estado.estado?n("span",{staticClass:"black--text"},[e._v("¿Deseas activar el cliente "+e._s(this.estado.nombre)+"?")]):e._e()])],1),n("v-card-actions",[n("v-btn",{on:{click:function(t){return e.clearEstado()}}},[e._v("cancelar")]),n("v-spacer"),n("v-btn",{on:{click:function(t){return e.cambiarEstado()}}},[e._v("Aceptar")])],1)],1)],1)],1)},o=[],s=n("1da1"),c=(n("96cf"),{data:function(){return{documentos:["INE","Pasaporte"],clientes:[],search:"",estado:{_id:"",nombre:"",active:!1,estado:null},btn:{agregar:!1,editar:!1},snack:{color:"",time:2e3,msj:"",active:!1},dialog:!1,_id:"",inputs:{nombre:null,tipo_documento:null,tipo_persona:"Cliente",num_documento:null,direccion:null,telefono:null,email:null},encabezado:[{text:"Opciones",value:"accion",sortable:!1},{text:"Nombre",value:"nombre",sortable:!0},{text:"Tipo persona",value:"tipo_persona",sortable:!1},{text:"Tipo documento",value:"tipo_documento",sortable:!1},{text:"Número documento",value:"num_documento",sortable:!1},{text:"Teléfono",value:"telefono",sortable:!1},{text:"Dirección",value:"direccion",sortable:!1},{text:"Email",value:"email",sortable:!0},{text:"Estado",value:"estado",sortable:!1}]}},methods:{clear:function(){this.dialog=!1,this.inputs={nombre:null,tipo_documento:null,tipo_persona:"Cliente",num_documento:null,direccion:null,telefono:null,email:null},this._id="",this.btn={agregar:!1,editar:!1}},listarClientes:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={token:e.$store.state.token},a={headers:n},t.prev=2,t.next=5,e.axios.get("/persona/get-cliente",a);case 5:o=t.sent,e.clientes=o.data,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})))()},guardarCliente:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={token:e.$store.state.token},a={headers:n},t.prev=2,t.next=5,e.axios.post("persona/add-persona",e.inputs,a);case 5:t.sent,e.snack={color:"success",time:3500,active:!0,msj:"Cliente guardado"},e.listarClientes(),e.clear(),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](2),e.snack={color:"error",time:3500,active:!0,msj:t.t0.response.data.msj},e.clear();case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))()},datosEdit:function(e){this.btn={agregar:!1,editar:!0},this.dialog=!0,this.inputs={nombre:e.nombre,tipo_documento:e.tipo_documento,num_documento:e.num_documento,direccion:e.direccion,telefono:e.telefono,email:e.email,tipo_persona:"Cliente"},this._id=e._id},editarCliente:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={token:e.$store.state.token},a={headers:n},t.prev=2,t.next=5,e.axios.put("persona/update-persona",{_id:e._id,tipo_persona:e.inputs.tipo_persona,nombre:e.inputs.nombre,tipo_documento:e.inputs.tipo_documento,num_documento:e.inputs.num_documento,direccion:e.inputs.direccion,telefono:e.inputs.telefono,email:e.inputs.email},a);case 5:t.sent,e.snack={color:"success",time:3500,active:!0,msj:"Cliente actualizado"},e.listarClientes(),e.clear(),t.next=16;break;case 11:t.prev=11,t.t0=t["catch"](2),console.log(t.t0),e.snack={color:"error",time:3500,active:!0,msj:"Ocurrio un error"},e.clear();case 16:case"end":return t.stop()}}),t,null,[[2,11]])})))()},editEstado:function(e){this.estado={_id:e._id,nombre:e.nombre,active:!0,estado:e.estado}},clearEstado:function(){this.estado={_id:"",nombre:"",active:!1,estado:null}},cambiarEstado:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n={token:e.$store.state.token},a={headers:n},1!==e.estado.estado){t.next=16;break}return t.prev=3,t.next=6,e.axios.put("persona/deactivate-persona",{_id:e.estado._id},a);case 6:t.sent,e.snack={color:"success",time:3500,active:!0,msj:"Cliente desactivado"},e.listarClientes(),e.clearEstado(),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](3),e.snack={color:"error",time:3500,active:!0,msj:"Ocurrio un error"},e.clearEstado();case 16:if(0!==e.estado.estado){t.next=30;break}return t.prev=17,t.next=20,e.axios.put("persona/activate-persona",{_id:e.estado._id},a);case 20:t.sent,e.snack={color:"success",time:3500,active:!0,msj:"Cliente activado"},e.listarClientes(),e.clearEstado(),t.next=30;break;case 26:t.prev=26,t.t1=t["catch"](17),e.snack={color:"error",time:3500,active:!0,msj:"Ocurrio un error"},e.clearEstado();case 30:case"end":return t.stop()}}),t,null,[[3,12],[17,26]])})))()}},created:function(){this.listarClientes()}}),i=c,r=n("2877"),l=Object(r["a"])(i,a,o,!1,null,null,null);t["default"]=l.exports},"1da1":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n("d3b7");function a(e,t,n,a,o,s,c){try{var i=e[s](c),r=i.value}catch(l){return void n(l)}i.done?t(r):Promise.resolve(r).then(a,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,s){var c=e.apply(t,n);function i(e){a(c,o,s,i,r,"next",e)}function r(e){a(c,o,s,i,r,"throw",e)}i(void 0)}))}}}}]);
//# sourceMappingURL=chunk-e235dcfe.6e6de2a9.js.map