(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e1e005a"],{"1da1":function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));o("d3b7");function a(e,t,o,a,n,r,s){try{var c=e[r](s),i=c.value}catch(l){return void o(l)}c.done?t(i):Promise.resolve(i).then(a,n)}function n(e){return function(){var t=this,o=arguments;return new Promise((function(n,r){var s=e.apply(t,o);function c(e){a(s,n,r,c,i,"next",e)}function i(e){a(s,n,r,c,i,"throw",e)}c(void 0)}))}}},"36e4":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"d-flex justify-center mt-2"},[o("v-snackbar",{attrs:{top:"",color:e.snack.color,timeout:e.snack.time},model:{value:e.snack.active,callback:function(t){e.$set(e.snack,"active",t)},expression:"snack.active"}},[e._v(e._s(e.snack.msj))]),o("v-card",{staticClass:"col-11"},[o("v-card-title",[o("v-btn",{attrs:{fab:"",small:"",color:"primary"},on:{click:function(t){e.dialog=!0,e.btn.agregar=!0}}},[o("v-icon",[e._v("mdi-plus")])],1),o("v-spacer"),o("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),o("v-data-table",{attrs:{locale:"es-MX",headers:e.encabezado,items:e.proveedores,search:e.search},scopedSlots:e._u([{key:"item.accion",fn:function(t){var a=t.item;return[o("v-btn",{staticClass:"mr-2",attrs:{fab:"",text:"",small:"",color:"green"},on:{click:function(t){return e.datosEdit(a)}}},[o("v-icon",{attrs:{dark:""}},[e._v("mdi-pencil")])],1)]}},{key:"item.estado",fn:function(t){var a=t.item;return[1===a.estado?o("div",[o("v-btn",{staticClass:"green",attrs:{small:""},on:{click:function(t){return e.editEstado(a)}}},[e._v("Activo")])],1):e._e(),0===a.estado?o("div",[o("v-btn",{staticClass:"red",attrs:{small:""},on:{click:function(t){return e.editEstado(a)}}},[e._v("Inactivo")])],1):e._e()]}}],null,!0)})],1),o("v-dialog",{attrs:{persistent:"","max-width":"700px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[o("v-card",[o("v-card-title",{staticClass:"red lighten-2"},[e._v("Proveedor "),o("v-spacer"),o("v-btn",{attrs:{text:"",fab:"",color:"black"},on:{click:function(t){return e.clear()}}},[o("v-icon",[e._v("mdi-close")])],1)],1),o("v-card-text",[o("v-container",[o("v-row",[o("v-col",{staticClass:"col-12 col-sm-6 col-md-4"},[o("v-text-field",{attrs:{label:"Nombre"},model:{value:e.inputs.nombre,callback:function(t){e.$set(e.inputs,"nombre",t)},expression:"inputs.nombre"}})],1),o("v-col",{staticClass:"col-12 col-sm-6 col-md-4"},[o("v-select",{attrs:{items:e.documentos,label:"Tipo documento"},model:{value:e.inputs.tipo_documento,callback:function(t){e.$set(e.inputs,"tipo_documento",t)},expression:"inputs.tipo_documento"}})],1),o("v-col",{staticClass:"col-12 col-sm-6 col-md-4"},[o("v-text-field",{attrs:{label:"Número de documento"},model:{value:e.inputs.num_documento,callback:function(t){e.$set(e.inputs,"num_documento",t)},expression:"inputs.num_documento"}})],1),o("v-col",{staticClass:"col-12 col-sm-6 col-md-4"},[o("v-text-field",{attrs:{label:"Dirección"},model:{value:e.inputs.direccion,callback:function(t){e.$set(e.inputs,"direccion",t)},expression:"inputs.direccion"}})],1),o("v-col",{staticClass:"col-12 col-sm-6 col-md-4"},[o("v-text-field",{attrs:{label:"Teléfono",type:"number",step:"any"},model:{value:e.inputs.telefono,callback:function(t){e.$set(e.inputs,"telefono",t)},expression:"inputs.telefono"}})],1),o("v-col",{staticClass:"col-12 col-sm-6 col-md-4"},[o("v-text-field",{attrs:{label:"Email"},model:{value:e.inputs.email,callback:function(t){e.$set(e.inputs,"email",t)},expression:"inputs.email"}})],1)],1)],1)],1),o("v-card-actions",[o("v-btn",{on:{click:function(t){return e.clear()}}},[e._v("cancelar")]),o("v-spacer"),this.btn.agregar?o("v-btn",{on:{click:function(t){return e.guardarProveedor()}}},[e._v("Guardar")]):e._e(),this.btn.editar?o("v-btn",{on:{click:function(t){return e.editarProveedor()}}},[e._v("Editar")]):e._e()],1)],1)],1),o("v-dialog",{attrs:{persistent:"","max-width":"400px"},model:{value:e.estado.active,callback:function(t){e.$set(e.estado,"active",t)},expression:"estado.active"}},[o("v-card",[o("v-card-title",{staticClass:"red lighten-2"},[e._v("Proveedor "),o("v-spacer"),o("v-btn",{attrs:{text:"",fab:"",color:"black"},on:{click:function(t){return e.clearEstado()}}},[o("v-icon",[e._v("mdi-close")])],1)],1),o("v-card-text",[o("v-container",[1===this.estado.estado?o("span",{staticClass:"black--text"},[e._v("¿Deseas desactivar el proveedor "+e._s(this.estado.nombre)+"?")]):e._e(),0===this.estado.estado?o("span",{staticClass:"black--text"},[e._v("¿Deseas activar el proveedor "+e._s(this.estado.nombre)+"?")]):e._e()])],1),o("v-card-actions",[o("v-btn",{on:{click:function(t){return e.clearEstado()}}},[e._v("cancelar")]),o("v-spacer"),o("v-btn",{on:{click:function(t){return e.cambiarEstado()}}},[e._v("Aceptar")])],1)],1)],1)],1)},n=[],r=o("1da1"),s=(o("96cf"),{data:function(){return{documentos:["INE","Pasaporte"],proveedores:[],search:"",estado:{_id:"",nombre:"",active:!1,estado:null},btn:{agregar:!1,editar:!1},snack:{color:"",time:2e3,msj:"",active:!1},dialog:!1,_id:"",inputs:{nombre:null,tipo_documento:null,tipo_persona:"Proveedor",num_documento:null,direccion:null,telefono:null,email:null},encabezado:[{text:"Opciones",value:"accion",sortable:!1},{text:"Nombre",value:"nombre",sortable:!0},{text:"Tipo persona",value:"tipo_persona",sortable:!1},{text:"Tipo documento",value:"tipo_documento",sortable:!1},{text:"Número documento",value:"num_documento",sortable:!1},{text:"Teléfono",value:"telefono",sortable:!1},{text:"Dirección",value:"direccion",sortable:!1},{text:"Email",value:"email",sortable:!0},{text:"Estado",value:"estado",sortable:!1}]}},methods:{clear:function(){this.dialog=!1,this.inputs={nombre:null,tipo_documento:null,tipo_persona:"Proveedor",num_documento:null,direccion:null,telefono:null,email:null},this._id="",this.btn={agregar:!1,editar:!1}},listarProveedores:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var o,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o={token:e.$store.state.token},a={headers:o},t.prev=2,t.next=5,e.axios.get("/persona/get-proveedor",a);case 5:n=t.sent,e.proveedores=n.data,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})))()},guardarProveedor:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o={token:e.$store.state.token},a={headers:o},t.prev=2,t.next=5,e.axios.post("persona/add-persona",e.inputs,a);case 5:t.sent,e.snack={color:"success",time:3500,active:!0,msj:"Proveedor guardado"},e.listarProveedores(),e.clear(),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](2),e.snack={color:"error",time:3500,active:!0,msj:t.t0.response.data.msj},e.clear();case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))()},datosEdit:function(e){this.btn={agregar:!1,editar:!0},this.dialog=!0,this.inputs={nombre:e.nombre,tipo_documento:e.tipo_documento,num_documento:e.num_documento,direccion:e.direccion,telefono:e.telefono,email:e.email,tipo_persona:"Proveedor"},this._id=e._id},editarProveedor:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o={token:e.$store.state.token},a={headers:o},t.prev=2,t.next=5,e.axios.put("persona/update-persona",{_id:e._id,tipo_persona:e.inputs.tipo_persona,nombre:e.inputs.nombre,tipo_documento:e.inputs.tipo_documento,num_documento:e.inputs.num_documento,direccion:e.inputs.direccion,telefono:e.inputs.telefono,email:e.inputs.email},a);case 5:t.sent,e.snack={color:"success",time:3500,active:!0,msj:"Proveedor actualizado"},e.listarProveedores(),e.clear(),t.next=16;break;case 11:t.prev=11,t.t0=t["catch"](2),console.log(t.t0),e.snack={color:"error",time:3500,active:!0,msj:"Ocurrio un error"},e.clear();case 16:case"end":return t.stop()}}),t,null,[[2,11]])})))()},editEstado:function(e){this.estado={_id:e._id,nombre:e.nombre,active:!0,estado:e.estado}},clearEstado:function(){this.estado={_id:"",nombre:"",active:!1,estado:null}},cambiarEstado:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(o={token:e.$store.state.token},a={headers:o},1!==e.estado.estado){t.next=16;break}return t.prev=3,t.next=6,e.axios.put("persona/deactivate-persona",{_id:e.estado._id},a);case 6:t.sent,e.snack={color:"success",time:3500,active:!0,msj:"Proveedor desactivado"},e.listarProveedores(),e.clearEstado(),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](3),e.snack={color:"error",time:3500,active:!0,msj:"Ocurrio un error"},e.clearEstado();case 16:if(0!==e.estado.estado){t.next=30;break}return t.prev=17,t.next=20,e.axios.put("persona/activate-persona",{_id:e.estado._id},a);case 20:t.sent,e.snack={color:"success",time:3500,active:!0,msj:"Proveedor activado"},e.listarProveedores(),e.clearEstado(),t.next=30;break;case 26:t.prev=26,t.t1=t["catch"](17),e.snack={color:"error",time:3500,active:!0,msj:"Ocurrio un error"},e.clearEstado();case 30:case"end":return t.stop()}}),t,null,[[3,12],[17,26]])})))()}},created:function(){this.listarProveedores()}}),c=s,i=o("2877"),l=Object(i["a"])(c,a,n,!1,null,null,null);t["default"]=l.exports}}]);
//# sourceMappingURL=chunk-4e1e005a.285b7e02.js.map